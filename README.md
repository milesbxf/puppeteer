# ğŸ¤¡ puppeteer
CI/CD built on top of K8s.

Will allow defining pipelines as Kubernetes objects:
```
apiVersion: puppeteer.io/builds/alphav1
kind: Pipeline
metadata:
  name: k8s-build
  labels:
    component: k8s
    owner: infrastructure-team
spec:
  workflow:
    input:
      scm-upstream:
        git:
          repository: https://github.com/kubernetes/kubernetes
          branch: master
    stages:
    - name: build
      tasks:
        build-image:
          image: golang:1.12-stretch
          inputs:
          - from: scm-upstream.git
            path: /go/src/k8s.io/kubernetes
          shell: |
            #!/bin/bash
            set -exo pipefail
            cd $GOPATH/src/k8s.io/kubernetes
            make
          outputs:
            image:
              docker:
                repo: milesbxf/hyperkube
```

## ğŸš§ Building and installing

There is currently one main component, which is the manager. So far I've been hacking on it by running [minikube](https://github.com/kubernetes/minikube/) and running the manager locally against it.

The `Makefile` (generated by kubebuilder) is pretty useful, take a look, but basic workflow:
```
make install # installs CRDs into current kube context
make run # runs the manager
```

## Design

More on the design in the [docs/design](docs/design) folder.

